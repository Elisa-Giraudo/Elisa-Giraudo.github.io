(function(){"use strict";window.onerror=function(){window.alerts?window.alerts.error("There was a problem with your last action.  Please reload the page, then try again."):alert("Something serious went wrong.  Please close out of Fail Tracker, then try again.")};var n=angular.module("inigoApp",["ngMaterial","ngMessages","ng.deviceDetector"]).config(["$provide",function(n){var t=$("#linkRoot").attr("href");n.constant("rootUrl",t)}]).config(["$mdThemingProvider",function(n){var t=n.extendPalette("blue-grey",{"500":"#59C5FF",contrastDefaultColor:"light"});n.definePalette("my-blue-grey",t);n.theme("default").primaryPalette("my-blue-grey").accentPalette("blue").warnPalette("red").backgroundPalette("grey")}]).config(["$mdIconProvider",function(n){var t=$("#linkRoot").attr("href");n.defaultIconSet(t+"Content/Images/icons/mdi.svg")}]).filter("nospace",function(){return function(n){return n?n.replace(/ /g,""):""}}).filter("humanizeDoc",function(){return function(n){if(n)return n.type==="directive"?n.name.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()}):n.label||n.name}});n.run([function(){}]);angular.module("common.services",[]).config(["$provide",function(n){var t=$("#linkRoot").attr("href");n.constant("rootUrl",t)}]);angular.module("myMenuApp.controllers",["common.directives"]).config(["$provide",function(n){var t=$("#linkRoot").attr("href");n.constant("rootUrl",t)}]);angular.module("common.directives",["common.services"]).config(["$provide",function(n){var t=$("#linkRoot").attr("href");n.constant("rootUrl",t)}])})(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s,h,c){function v(t,i){n.loading=!0;c.getIsActivationPending(t).success(function(t){t===!0?l(i):n.state="preview";n.loading=!1}).error(function(){n.loading=!1})}function l(t){var i=s.prompt().title("Got the code?").textContent("We have recently emailed you your secret code to sign-in to your account").placeholder("0000").ariaLabel("Secret Code").initialValue("").targetEvent(t).ok("Log in!").cancel("No code, continue");s.show(i).then(function(n){y(n,t)},function(){n.state="preview"})}function y(t,i){n.loading=!0;c.getValidationURL(t,n.model).then(function(t){t.data==="Invalid"?(e.showSimpleToast("Invalid Code.",3e3),l(i)):a(t.data);n.loading=!1},function(){n.loading=!1;e.showSimpleToast("Oops, that didn't work.",7e3)})}function a(n){navigator.userAgent.match(/Android/i)?document.location=n:window.location.replace(n)}n.model=null;n.state="form";n.init=function(t){n.model=t;n.model.agree=!0;n.model.redirectUrl="";console.log(n.model)};n.$on("$stateChangeStart",function(){console.log("StateChange")});n.showPrompt=function(){};n.showActionTip=function(n,t){s.show(s.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Tip").textContent(t).ariaLabel("What will happen?").ok("Got it!").targetEvent(n))};n.submitForm=function(t){if(n.onboardForm.$invalid){n.onboardForm.$setSubmitted();return}n.model.mobile===null|n.model.mobile===undefined|n.model.mobile===""&&(n.model.mobile="(617) 311-0000");n.cardDetails={elements:[{text:"Send me an email",url:n.model.userName,actionText:"Click on email element starts an email composer addressed to you on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_gmail.png"},{text:"Give me a call",url:n.model.mobile,actionText:"Click on phone element starts a dialer to your number on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_phone.png"},{text:"Get 20% discount here",url:"https://"+n.model.firstName+"-"+n.model.lastName+".com/promo20",actionText:"Click on website element opens your website in new browser tab of your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_chrome.png"},{text:"Watch our 1 minute video",url:"https://youtu.be/example",actionText:"Click on video element plays your video on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_youtube.png"},{text:"Add me on LinkedIn",url:"https://linked.in/"+n.model.firstName+"-"+n.model.lastName,actionText:"Click on Linkedin element brings your customer to your LinkedIn profile for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_linkedin.png"},{text:"Like our Facebook page",url:"https://facebook.com/page-example",actionText:"Click on Facebook element brings your customer to your Facebook page for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_facebook.png"},{text:"Navigate to our store",url:"1464 Main st, Cambridge MA",actionText:"Click on address element starts the Navigation to your location on your customer's device",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_location.png"}]};v(n.model.userName,t)};n.simulateInbox=function(){n.state="inbox"};n.simulateSms=function(){n.state="sms"};n.share=function(){n.state="options"};n.customerPreview=function(){n.state="customer"};n.save=function(){n.state="explain"};n.complete=function(){n.state="activate"};n.activate=function(){n.loading=!0;c.register(n.model).then(function(t){t.status>200?e.showSimpleToast(t.data.message,3e3):t.data=="Sent"?n.state="sent":t.data!=undefined&&t.data!="Invalid"&&(n.model.redirectUrl=t.data,n.state="redirect",a(t.data));n.loading=!1},function(){n.loading=!1;e.showSimpleToast("Oops, that didn't work.",7e3)})}}angular.module("inigoApp").controller("newAccountController-original",["$scope","$http","rootUrl","$timeout","$document","$window","toastAlert","deviceDetector","$mdDialog","$mdSidenav","onboarding",n])}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s,h,c){function y(t,i){n.isLoading=!0;c.getIsActivationPending(t).success(function(t){t===!0?a(i):n.state="preview";n.isLoading=!1}).error(function(){n.isLoading=!1})}function p(t){n.isLoading=!0;c.getIsMobileAppUser(t).success(function(i){i===!0?w(t):n.state="preview";n.isLoading=!1}).error(function(){n.isLoading=!1})}function w(t){n.isLoading=!0;c.getIsMobileAppUser(t).success(function(t){t===!0?l("https://team.inigoapp.com"):n.state="build-organization";n.isLoading=!1}).error(function(){n.isLoading=!1})}function a(t){var i=s.prompt().title("Got the code?").textContent("We have recently emailed you your secret code to sign-in to your account").placeholder("0000").ariaLabel("Secret Code").initialValue("").targetEvent(t).ok("Log in!").cancel("No code, continue");s.show(i).then(function(n){b(n,t)},function(){n.state="preview"})}function b(t,i){n.isLoading=!0;c.getValidationURL(t,n.model).then(function(t){t.status===400&&t.data.message==="Invalid"?(e.showSimpleToast("Invalid Code.",3e3),a(i)):l("https://inigoapp.com/m/validation/"+n.model.platform+"/"+t.data.token);n.isLoading=!1},function(){n.isLoading=!1;e.showSimpleToast("Oops, that didn't work.",7e3)})}function l(n){navigator.userAgent.match(/Android/i)?document.location=n:window.location.replace(n)}var v;n.model=null;n.state="form";n.isWideScreen=!0;n.isLoading=!1;n.init=function(t){n.model=t;n.model.agree=!0;n.model.redirectUrl="";console.log(n.model);n.model.startAt=="form-organization"&&(n.state="form-organization")};n.$on("$stateChangeStart",function(){console.log("StateChange")});n.showPrompt=function(){};n.showActionTip=function(n,t){s.show(s.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Tip").textContent(t).ariaLabel("What will happen?").ok("Got it!").targetEvent(n))};n.submitForm=function(t){if(n.isLoading=!0,n.onboardForm.$invalid){n.onboardForm.$setSubmitted();n.isLoading=!1;return}n.model.mobile===null|n.model.mobile===undefined|n.model.mobile===""&&(n.model.mobile="(617) 311-0000");n.cardDetails={elements:[{text:"Send me an email",url:n.model.userName,actionText:"Click on email element starts an email composer addressed to you on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_gmail.png"},{text:"Give me a call",url:n.model.mobile,actionText:"Click on phone element starts a dialer to your number on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_phone.png"},{text:"Get 20% discount here",url:"https://"+n.model.firstName+"-"+n.model.lastName+".com/promo20",actionText:"Click on website element opens your website in new browser tab of your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_chrome.png"},{text:"Watch our 1 minute video",url:"https://youtu.be/example",actionText:"Click on video element plays your video on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_youtube.png"},{text:"Add me on LinkedIn",url:"https://linked.in/"+n.model.firstName+"-"+n.model.lastName,actionText:"Click on Linkedin element brings your customer to your LinkedIn profile for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_linkedin.png"},{text:"Like our Facebook page",url:"https://facebook.com/page-example",actionText:"Click on Facebook element brings your customer to your Facebook page for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_facebook.png"},{text:"Navigate to our store",url:"1464 Main st, Cambridge MA",actionText:"Click on address element starts the Navigation to your location on your customer's device",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_location.png"}]};n.model.skipPin?n.state="preview":y(n.model.userName,t)};n.submitFormOrganization=function(t,i){if(n.onboardFormOrg.$invalid){n.onboardFormOrg.$setSubmitted();return}n.isWideScreen=i;n.model.mobile="(617) 311-0000";n.cardDetails={elements:[{text:"Send me an email",url:n.model.userName,actionText:"Click on email element starts an email composer addressed to you on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_gmail.png"},{text:"Give me a call",url:n.model.mobile,actionText:"Click on phone element starts a dialer to your number on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_phone.png"},{text:"Get 20% discount here",url:"https://"+n.model.firstName+"-"+n.model.lastName+".com/promo20",actionText:"Click on website element opens your website in new browser tab of your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_chrome.png"},{text:"Watch our 1 minute video",url:"https://youtu.be/example",actionText:"Click on video element plays your video on your customer' device.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_youtube.png"},{text:"Add me on LinkedIn",url:"https://linked.in/"+n.model.firstName+"-"+n.model.lastName,actionText:"Click on Linkedin element brings your customer to your LinkedIn profile for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_linkedin.png"},{text:"Like our Facebook page",url:"https://facebook.com/page-example",actionText:"Click on Facebook element brings your customer to your Facebook page for instant connection.",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_facebook.png"},{text:"Navigate to our store",url:"1464 Main st, Cambridge MA",actionText:"Click on address element starts the Navigation to your location on your customer's device",pictureURL:"https://d3vvd7gre8315u.cloudfront.net/m/images/ic_location.png"}]};p(n.model.userName)};n.share=function(){n.state="sending"};n.customerPreview=function(){n.state="customer";f.scrollTo(0,0);r(v,2e3)};v=function(t){n.showActionTip(t,"The recipients can click on your content elements or Save your card right to their contacts")};n.save=function(){n.model.token!=undefined?(n.state="download",n.isLoading=!0,c.sendDownloadApp(n.model).then(function(t){t.status>200&&e.showSimpleToast(t.data.message,3e3);n.isLoading=!1},function(){n.isLoading=!1;e.showSimpleToast("Oops, that didn't work.",7e3)})):n.state="activate"};n.activate=function(){n.isLoading=!0;c.register(n.model).then(function(t){t.status>200?e.showSimpleToast(t.data.message,3e3):t.data=="Sent"?n.state="sent":t.data!=undefined&&t.data!="Invalid"&&(n.model.redirectUrl=t.data,n.state="redirect",l(t.data));n.isLoading=!1},function(){n.isLoading=!1;e.showSimpleToast("Oops, that didn't work.",7e3)})}}angular.module("inigoApp").controller("newAccountController",["$scope","$http","rootUrl","$timeout","$document","$window","toastAlert","deviceDetector","$mdDialog","$mdSidenav","onboarding",n])}(),function(){"use strict";function n(n,t,i,r,u,f,e,o,s,h){function w(n,t,i){var u=n<0?n*-1:n,f=Math.round,r=parseInt;if(t.length>7){var e=t.split(","),o=(i?i:n<0?"rgb(0,0,0)":"rgb(255,255,255)").split(","),s=r(e[0].slice(4)),h=r(e[1]),c=r(e[2]);return"rgb("+(f((r(o[0].slice(4))-s)*u)+s)+","+(f((r(o[1])-h)*u)+h)+","+(f((r(o[2])-c)*u)+c)+")"}var e=r(t.slice(1),16),o=r((i?i:n<0?"#000000":"#FFFFFF").slice(1),16),l=e>>16,a=e>>8&255,v=e&255;return"#"+(16777216+(f(((o>>16)-l)*u)+l)*65536+(f(((o>>8&255)-a)*u)+a)*256+(f(((o&255)-v)*u)+v)).toString(16).slice(1)}function y(n,t){function i(){t.cancel()}n.closePicker=i}var p="Oops something went wrong. If you continue getting this error, please contact@inigoapp.com",c,l,a,v;n.cardDetails=null;n.isPopupSave=!1;n.height="210px";n.operation="NONE";n.showOneElement=!1;n.selectedElement=null;n.isCardFooter=!1;n.profilePictureSize=15;n.elementsCardSize=0;n.isHidden=!1;n.saveIsDisabled=!1;n.isApple=!1;n.isGoogle=!1;n.sendIsDisabled=!1;n.darkerColorCode;n.device;n.browser;n.toggleViewer=null;n.selectedPicture="NONE";n.setSelectedPicture=function(t){n.selectedPicture=t;r(function(){n.toggleViewer!==null&&n.toggleViewer()},50)};n.cardUserDetailsPadding=3;n.cardUserDetailsLeft=11;n.cardFooterLeft=7;n.profileDescriptionMLeft=3;n.form={FirstName:"",LastName:"",Job:"",Email:"",Phone:"",Twitter:""};n.init=function(t){n.cardDetails=t;n.darkerColorCode=w(-.1,n.cardDetails.ColorCode);console.log(n.cardDetails);l();n.cardDetails.Footer===null?(n.isApple=!0,n.isGoogle=!0):c(n.cardDetails.Footer);n.device=o.device;n.browser=o.browser;console.log(o)};c=function(t){(t.Picture1LinkURL===""||t.Picture1LinkURL===null)&&(t.Picture1URL===""||t.c===null)&&(n.isApple=!0);(t.Picture2LinkURL===""||t.Picture2LinkURL===null)&&(t.Picture2URL===""||t.Picture2URL===null)&&(n.isGoogle=!0)};n.sidenavToggle=function(){h("left").toggle()};n.sendToStore=function(n){switch(n){case"Apple":f.open("https://itunes.apple.com/au/app/digital-business-cards-by/id851990820?mt=8");break;case"Google":f.open("https://play.google.com/store/apps/details?id=com.inigoapp.inigoandroid")}};l=function(){switch(n.cardDetails.ProfilePictureSize){case 3:n.profilePictureSize=30;n.elementsCardSize=716.92;n.cardUserDetailsPadding=6.8;n.cardUserDetailsLeft=18;n.cardFooterLeft=14;n.profileDescriptionMLeft=3;break;case 2:n.profilePictureSize=20;n.elementsCardSize=738.33;n.cardUserDetailsPadding=4;n.cardUserDetailsLeft=14;n.cardFooterLeft=10;n.profileDescriptionMLeft=3.5;break;case 1:n.profilePictureSize=15;n.elementsCardSize=754.92;n.cardUserDetailsPadding=2.9;n.cardUserDetailsLeft=11;n.cardFooterLeft=7;n.profileDescriptionMLeft=3.5;break;case 0:n.isHidden=!0;n.elementsCardSize=738.33}};n.setCardFooter=function(){n.isCardFooter=!n.isCardFooter};n.toggleSavePopup=function(){n.isPopupSave=!n.isPopupSave};n.openElement=function(t){t.TypeCode==="Note"?n.showAlert(t):f.location.href=i+"Public/OpenElementURL/?url="+t.URL+"&sc="+t.Code+"&ppc="+t.PublicProfileCode+"&sh="+t.ShareCode};n.showAlert=function(n){s.show(s.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title(n.Text).textContent(n.DisplayURL).ariaLabel(n.Text).ok("Got it!"))};n.openFooterUrl=function(n){n!==null&&n!==""&&f.open(n)};n.selectElement=function(t){n.showOneElement=!0;n.selectedElement=t};n.closeElement=function(){n.selectedElement=null;n.showOneElement=!1};n.setOperation=function(t){n.operation="TEMP";r(function(){n.operation=t},700);t==="NONE"?v():a()};a=function(){n.height="100%"};v=function(){n.height="210px"};n.downloadContact=function(t){n.saveIsDisabled=!0;e.showSimpleToast("Processing...",3e3);f.location.href=i+"Contacts/vCard/?id="+n.cardDetails.ProfileCode+"&sh="+n.cardDetails.ShareCode;r(function(){n.saveIsDisabled=!1},3e3);r(function(){n.showDownloadGuide(t)},2e3)};y.$inject=["$scope","$mdDialog"];n.showDownloadGuide=function(n){s.show({controller:y,templateUrl:"../../scripts/app/partials/download-alert.tmpl.html",parent:angular.element(document.body),targetEvent:n})};n.sendContactDetails=function(){n.sendIsDisabled=!0;e.showSimpleToast("Sending...",3e3);t.post(i+"Public/SendContactDetails",n.form).success(function(){n.sendIsDisabled=!1;e.showSimpleToast("Sent. Thank you",3e3)}).error(function(){n.sendIsDisabled=!1;e.showSimpleToast(p,7e3)})}}angular.module("inigoApp").controller("webCardController",["$scope","$http","rootUrl","$timeout","$document","$window","toastAlert","deviceDetector","$mdDialog","$mdSidenav",n])}(),function(){"use strict";angular.module("inigoApp").factory("onboarding",["$http","rootUrl",function(n,t){function i(i){function r(n){return n}function u(n){return n.data}return i=encodeURIComponent(i),n.get(t+"api/V2/account/"+i+"/is-activation-pending?nocache="+(new Date).getTime()).success(u).error(r)}function r(i){function r(n){return n}function u(n){return n.data}return i=encodeURIComponent(i),n.get(t+"api/V2/account/"+i+"/is-mobile-app-user?nocache="+(new Date).getTime()).success(u).error(r)}function u(i){function r(n){return n}function u(n){return n.data}return i=encodeURIComponent(i),n.get(t+"api/V2/account/"+i+"/is-website-user?nocache="+(new Date).getTime()).success(u).error(r)}function f(i,r){function u(n){return n}function f(n){return n}return n.post(t+"api/V2/device/activate/"+i,r).then(f,u)}function e(i){function r(n){return n}function u(n){return n}return n.post(t+"api/V2/account/register",i).then(u,r)}function o(i){function r(n){return n}function u(n){return n}return n.post(t+"api/V2/account/send-app-download",i).then(u,r)}return{getIsActivationPending:i,getValidationURL:f,getIsMobileAppUser:r,getIsWebsiteUser:u,register:e,sendDownloadApp:o}}])}(),function(){"use strict";angular.module("inigoApp").factory("toastAlert",["$mdToast",function(n){function r(){return u(),Object.keys(i).filter(function(n){return i[n]}).join(" ")}function u(){var n=i;n.bottom&&t.top&&(n.top=!1);n.top&&t.bottom&&(n.bottom=!1);n.right&&t.left&&(n.left=!1);n.left&&t.right&&(n.right=!1);t=angular.extend({},n)}function f(t,i){n.show(n.simple().textContent(t).position(r()).hideDelay(i))}var t={bottom:!1,top:!0,left:!1,right:!0},i=angular.extend({},t);return{showSimpleToast:f}}])}(),function(){"use strict";angular.module("inigoApp").directive("pictureViewer",["rootUrl","$mdDialog","$sce",function(n,t){return{scope:{pictureUrl:"=pictureUrl",cardDetails:"=cardDetails",toggleViewer:"=toggleViewer"},link:function(i){function r(n,t){function r(){t.cancel();n.selectedPicture="NONE"}n.closePicker=r;n.cardDetails=i.cardDetails;n.selectedPicture=i.pictureUrl}i.showPictureViewer=function(){t.show({controller:r,templateUrl:n+"scripts/app/partials/picture-viewer.tmpl.html",parent:angular.element(document.body),clickOutsideToClose:!1})};i.toggleViewer=i.showPictureViewer;r.$inject=["$scope","$mdDialog","$sce"]}}}])}()